@import 'tailwindcss';

@config '../../tailwind.config.ts';

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  ::selection {
    background-color: var(--color-selection-bg);
    color: var(--color-text-primary);
  }
}

@layer base {
  :root {
    /* Light Theme */
    --color-background: hsl(60, 20%, 99%);
    --color-text-primary: hsl(0, 0%, 7%);
    --color-text-secondary: hsl(0, 0%, 42%);
    --color-accent: rgb(0, 0, 0);
    --color-link: hsl(213, 85%, 54%);
    --color-border: hsl(0, 0%, 90%);
    --color-selection-bg: hsl(0, 0%, 93%);
    --color-mark-bg: hsl(200, 100%, 50%);

    /* Typography scale */
    --font-size-base: 0.875rem;
    --font-size-small: 0.8125rem;
    --font-size-tiny: 0.75rem;
    --font-weight-normal: 460;
    --font-weight-medium: 500;
    --font-weight-semibold: 560;
    --font-weight-bold: 600;
    --letter-spacing-tight: -0.016em;
    --letter-spacing-normal: -0.011em;
    --letter-spacing-loose: -0.01em;

    color-scheme: light dark;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      /* Dark Theme */
      --color-background: hsl(0, 0%, 4%);
      --color-text-primary: hsl(0, 0%, 100%);
      --color-text-secondary: hsl(0, 0%, 64%);
      --color-accent: hsl(0, 0%, 100%);
      --color-link: hsl(217, 97%, 72%);
      --color-border: hsla(0, 0%, 100%, 0.1);
      --color-selection-bg: hsla(0, 0%, 100%, 0.175);
      --color-mark-bg: hsl(217, 97%, 72%);
    }
  }

  html {
    font-family:
      'Inter',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      'Helvetica Neue',
      sans-serif;
    background-color: var(--color-background);
    color: var(--color-text-primary);
    font-feature-settings: 'cv11', 'ss01';
    font-variation-settings: 'slnt' 0;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    letter-spacing: var(--letter-spacing-normal);
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
    scroll-padding-top: 2rem;
    line-height: 1.5;
  }
}

@utility styled-link {
  color: var(--color-link);
  text-decoration: none;
  position: relative;
  transition: all 0.15s ease-out;

  &:hover {
    text-decoration-color: rgba(36, 128, 237, 1);
  }

  & svg {
    display: inline-block;
    vertical-align: middle;
    opacity: 0.6;
    transform: translateY(-1px);
    transition: opacity 0.15s ease-out;
  }

  &:hover svg {
    opacity: 1;
  }
}

@utility post-year {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  letter-spacing: var(--letter-spacing-loose);
}

@utility post-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  letter-spacing: var(--letter-spacing-tight);
}

@utility post-date {
  font-family:
    'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', monospace;
  font-size: var(--font-size-small);
  font-weight: 400;
  color: var(--color-text-secondary);
  letter-spacing: var(--letter-spacing-loose);
}

article > p + div:has(h2) {
  padding-top: 2.25rem;
  font-weight: var(--font-weight-semibold);
}

/*
This is added to avoid padding on the first text after a figure element
Cause: MediaEmbed
*/
article > figure + script + p,
article > figure + p {
  padding-top: 0;
}
